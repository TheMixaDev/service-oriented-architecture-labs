<!DOCTYPE html>
<html data-theme="">
<head>
  <title>OpenAPI Docs</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20,400,0,0&icon_names=search" />
  <link rel="stylesheet" href="https://unpkg.com/swagger-ui-dist@5.26.2/swagger-ui.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tarekraafat/autocomplete.js@10.2.9/dist/css/autoComplete.02.min.css">
  <script src="https://cdn.jsdelivr.net/npm/@tarekraafat/autocomplete.js@10.2.9/dist/autoComplete.min.js"></script>
  <style>#search-button {
  position: fixed;
  top: 28px;
  right: 28px;
  z-index: 10;
  display: flex;
  align-items: center;
  background-color: #fff;
  border-radius: 4px;
  border: 1px solid #d9d9d9;
  padding: 4px 12px 4px 8px;
  cursor: pointer;

  .icon {
    font-size: 18px;
    margin-right: 4px;
  }
}

#search-dialog {
  position: fixed;
  top: 10px;
  margin: 0 auto;
  height: 100%;
  background: transparent;
  border: none;

  .auto-complete-list {
    max-height: 265px;
  }
}

#auto-complete {
  background-color: #fff;
}

.auto-complete-list {
  .auto-complete-list-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 8px 12px;
    cursor: pointer;
    border-bottom: 1px solid #f0f0f0;
    border-radius: 0;
  }
}

.method-tag {
  display: inline-block;
  padding: 2px 0;
  border-radius: 4px;
  font-size: 11px;
  color: #fff;
  min-width: 54px;
  text-align: center;
  flex-shrink: 0;
}

.endpoint-info {
  display: flex;
  flex-direction: column;
  flex: 1;
  word-break: break-all;
  overflow-wrap: break-word;
  white-space: normal;
}

.endpoint-path {
  font-size: 13px;
}

.endpoint-summary {
  font-size: 11px;
  color: #666;
}

[data-theme=dark] {
  #search-dialog::backdrop {
    background-color: rgba(255, 255, 255, 0.1);
  }

  #search-button {
    background-color: #1f1f1f;
    border: 1px solid #444;
    color: #fff;
  }

  #auto-complete {
    background-color: #1f1f1f;
    border: 1px solid #444;
    color: #fff;
  }

  .auto-complete-list {
    background-color: #1f1f1f;
    border: 1px solid #444;

    .auto-complete-list-item {
      background-color: #1f1f1f;
      border-bottom: 1px solid #444;
      color: #fff;

      &:hover {
        background-color: #333;
      }
    }

    .auto-complete-list-item[aria-selected="true"] {
      background-color: #333;
    }
  }

  .endpoint-path {
    color: #ccc;
  }

  .endpoint-summary {
    color: #888;
  }
}</style>
  <style>/* https://github.com/swagger-api/swagger-ui/issues/5327#issuecomment-742375520 */
html[data-theme="dark"] {
  body {
    background: black;
  }

  .swagger-ui {
    filter: invert(88%) hue-rotate(180deg);
  }

  .swagger-ui .microlight {
      filter: invert(100%) hue-rotate(180deg);
  }
}

.method-get {
  background-color: #61affe;
}

.method-post {
  background-color: #49cc90;
}

.method-put {
  background-color: #fca130;
}

.method-patch {
  background-color: #50e3c2;
}

.method-delete {
  background-color: #f93e3e;
}

.method-head {
  background-color: #9012fe;
}

.method-options {
  background-color: #0d5aa7;
}

.method-trace {
  background-color: #000;
}</style>
  <script>window.apiDocs = {"openapi":"3.0.0","info":{"title":"СОА спецификация OpenAPI","description":"Routes сервис для работы с маршрутами (REST API)\n\nБеляев Михаил и Дениченко Александр\n\nГруппа P3412\n\nВариант 8801","version":"1.0.0"},"servers":[{"url":"http://localhost:8888/api/v1"}],"tags":[{"name":"Routes"}],"paths":{"/routes":{"get":{"tags":["Routes"],"summary":"Получить все маршруты с фильтрацией, сортировкой и пагинацией","operationId":"getRoutes","parameters":[{"name":"sort","in":"query","description":"Поля для сортировки. Формат: `fieldName_asc` или `fieldName_desc`. Несколько полей через запятую.","required":false,"schema":{"type":"string","example":"name_asc,distance_desc"}},{"name":"filter","in":"query","description":"Параметры для фильтрации.","required":false,"style":"form","explode":true,"schema":{"type":"object","properties":{"name":{"type":"string","description":"Фильтрация по названию","example":"Москва"},"distance":{"type":"integer","format":"int64","description":"Фильтрация по дистанции","example":100},"coordinates.x":{"type":"number","format":"double","description":"Фильтрация по координате X","example":100},"coordinates.y":{"type":"integer","format":"int64","description":"Фильтрация по координате Y","example":100},"from.x":{"type":"number","format":"double","description":"Фильтрация по координате X начальной точки","example":100},"from.y":{"type":"number","format":"double","description":"Фильтрация по координате Y начальной точки","example":100},"from.name":{"type":"string","description":"Фильтрация по названию начальной точки","example":"Москва"},"to.x":{"type":"number","format":"double","description":"Фильтрация по координате X конечной точки","example":100},"to.y":{"type":"number","format":"double","description":"Фильтрация по координате Y конечной точки","example":100},"to.name":{"type":"string","description":"Фильтрация по названию конечной точки","example":"Москва"},"creationDate":{"type":"string","format":"date-time","description":"Фильтрация по дате создания","example":"2024-01-01T00:00:00Z"}}}},{"name":"page","in":"query","description":"Пагинация по номеру страницы (начиная с 1)","required":false,"schema":{"type":"integer","format":"int64","minimum":1,"default":1}},{"name":"pageSize","in":"query","description":"Количество элементов на странице","required":false,"schema":{"type":"integer","format":"int64","minimum":1,"maximum":50,"default":10}}],"responses":{"200":{"description":"Успешный ответ с массивом маршрутов","headers":{"X-Total-Count":{"description":"Общее количество записей","schema":{"type":"integer","example":150}}},"content":{"application/xml":{"schema":{"type":"array","xml":{"name":"RouteList"},"items":{"allOf":[{"type":"object","xml":{"name":"Route"},"properties":{"id":{"type":"integer","format":"int64","description":"Уникальный идентификатор (автоматически генерируется). Значение поля должно быть больше 0.","readOnly":true,"minimum":0,"exclusiveMinimum":true,"example":1},"creationDate":{"type":"string","format":"date-time","description":"Дата и время создания (автоматически генерируется).","readOnly":true,"example":"2025-01-01T00:00:00Z"}}},{"type":"object","description":"Описывает маршрут с начальной и конечной точками.","xml":{"name":"Route"},"properties":{"name":{"type":"string","description":"Название маршрута","minLength":1,"example":"Москва"},"coordinates":{"type":"object","description":"Координаты","xml":{"name":"Coordinates"},"properties":{"x":{"type":"number","format":"double","maximum":716,"description":"X координата. Максимальное значение поля: 716","example":100},"y":{"type":"integer","format":"int64","description":"Y координата. Поле не может быть null","example":100}},"required":["y"]},"from":{"type":"object","description":"Местоположение с координатами и его названием","xml":{"name":"Location"},"properties":{"x":{"type":"number","format":"double","description":"X координата. Не может быть null.","example":100},"y":{"type":"number","format":"double","description":"Y координата.","example":100},"name":{"type":"string","minLength":1,"description":"Название локации. Не может быть пустой, не может быть null.","example":"Москва"}},"required":["x","name"]},"to":{"type":"object","description":"Местоположение с координатами и его названием","xml":{"name":"Location"},"properties":{"x":{"type":"number","format":"double","description":"X координата. Не может быть null.","example":100},"y":{"type":"number","format":"double","description":"Y координата.","example":100},"name":{"type":"string","minLength":1,"description":"Название локации. Не может быть пустой, не может быть null.","example":"Москва"}},"required":["x","name"]},"distance":{"type":"integer","format":"int64","description":"Длина маршрута. Должна быть больше 1.","minimum":1,"exclusiveMinimum":true,"nullable":true,"example":100}},"required":["name","coordinates","from","to"]}]}}}}},"400":{"description":"Некорректные данные","content":{"application/xml":{"schema":{"allOf":[{"type":"object","description":"Ошибка","xml":{"name":"Error"},"properties":{"status":{"type":"integer","format":"int64","description":"Статус ошибки"},"message":{"type":"string","description":"Сообщение об ошибке"}},"required":["status","message"]},{"type":"object","properties":{"status":{"example":400},"message":{"example":"Некорректные данные"}}}]}}}},"500":{"description":"Внутренняя ошибка сервера","content":{"application/xml":{"schema":{"allOf":[{"type":"object","description":"Ошибка","xml":{"name":"Error"},"properties":{"status":{"type":"integer","format":"int64","description":"Статус ошибки"},"message":{"type":"string","description":"Сообщение об ошибке"}},"required":["status","message"]},{"type":"object","properties":{"status":{"example":500},"message":{"example":"Внутренняя ошибка сервера"}}}]}}}},"default":{"description":"Прочие сообщения об ошибках","content":{"application/xml":{"schema":{"type":"object","description":"Ошибка","xml":{"name":"Error"},"properties":{"status":{"type":"integer","format":"int64","description":"Статус ошибки"},"message":{"type":"string","description":"Сообщение об ошибке"}},"required":["status","message"]}}}}}},"post":{"tags":["Routes"],"summary":"Добавить новый маршрут","description":"Создает новый объект Route на основе переданных данных в теле запроса.","operationId":"createRoute","requestBody":{"required":true,"content":{"application/xml":{"schema":{"type":"object","description":"Описывает маршрут с начальной и конечной точками.","xml":{"name":"Route"},"properties":{"name":{"type":"string","description":"Название маршрута","minLength":1,"example":"Москва"},"coordinates":{"type":"object","description":"Координаты","xml":{"name":"Coordinates"},"properties":{"x":{"type":"number","format":"double","maximum":716,"description":"X координата. Максимальное значение поля: 716","example":100},"y":{"type":"integer","format":"int64","description":"Y координата. Поле не может быть null","example":100}},"required":["y"]},"from":{"type":"object","description":"Местоположение с координатами и его названием","xml":{"name":"Location"},"properties":{"x":{"type":"number","format":"double","description":"X координата. Не может быть null.","example":100},"y":{"type":"number","format":"double","description":"Y координата.","example":100},"name":{"type":"string","minLength":1,"description":"Название локации. Не может быть пустой, не может быть null.","example":"Москва"}},"required":["x","name"]},"to":{"type":"object","description":"Местоположение с координатами и его названием","xml":{"name":"Location"},"properties":{"x":{"type":"number","format":"double","description":"X координата. Не может быть null.","example":100},"y":{"type":"number","format":"double","description":"Y координата.","example":100},"name":{"type":"string","minLength":1,"description":"Название локации. Не может быть пустой, не может быть null.","example":"Москва"}},"required":["x","name"]},"distance":{"type":"integer","format":"int64","description":"Длина маршрута. Должна быть больше 1.","minimum":1,"exclusiveMinimum":true,"nullable":true,"example":100}},"required":["name","coordinates","from","to"]}}}},"responses":{"201":{"description":"Маршрут успешно создан.","content":{"application/xml":{"schema":{"allOf":[{"type":"object","xml":{"name":"Route"},"properties":{"id":{"type":"integer","format":"int64","description":"Уникальный идентификатор (автоматически генерируется). Значение поля должно быть больше 0.","readOnly":true,"minimum":0,"exclusiveMinimum":true,"example":1},"creationDate":{"type":"string","format":"date-time","description":"Дата и время создания (автоматически генерируется).","readOnly":true,"example":"2025-01-01T00:00:00Z"}}},{"type":"object","description":"Описывает маршрут с начальной и конечной точками.","xml":{"name":"Route"},"properties":{"name":{"type":"string","description":"Название маршрута","minLength":1,"example":"Москва"},"coordinates":{"type":"object","description":"Координаты","xml":{"name":"Coordinates"},"properties":{"x":{"type":"number","format":"double","maximum":716,"description":"X координата. Максимальное значение поля: 716","example":100},"y":{"type":"integer","format":"int64","description":"Y координата. Поле не может быть null","example":100}},"required":["y"]},"from":{"type":"object","description":"Местоположение с координатами и его названием","xml":{"name":"Location"},"properties":{"x":{"type":"number","format":"double","description":"X координата. Не может быть null.","example":100},"y":{"type":"number","format":"double","description":"Y координата.","example":100},"name":{"type":"string","minLength":1,"description":"Название локации. Не может быть пустой, не может быть null.","example":"Москва"}},"required":["x","name"]},"to":{"type":"object","description":"Местоположение с координатами и его названием","xml":{"name":"Location"},"properties":{"x":{"type":"number","format":"double","description":"X координата. Не может быть null.","example":100},"y":{"type":"number","format":"double","description":"Y координата.","example":100},"name":{"type":"string","minLength":1,"description":"Название локации. Не может быть пустой, не может быть null.","example":"Москва"}},"required":["x","name"]},"distance":{"type":"integer","format":"int64","description":"Длина маршрута. Должна быть больше 1.","minimum":1,"exclusiveMinimum":true,"nullable":true,"example":100}},"required":["name","coordinates","from","to"]}]}}}},"400":{"description":"Некорректные данные","content":{"application/xml":{"schema":{"allOf":[{"type":"object","description":"Ошибка","xml":{"name":"Error"},"properties":{"status":{"type":"integer","format":"int64","description":"Статус ошибки"},"message":{"type":"string","description":"Сообщение об ошибке"}},"required":["status","message"]},{"type":"object","properties":{"status":{"example":400},"message":{"example":"Некорректные данные"}}}]}}}},"500":{"description":"Внутренняя ошибка сервера","content":{"application/xml":{"schema":{"allOf":[{"type":"object","description":"Ошибка","xml":{"name":"Error"},"properties":{"status":{"type":"integer","format":"int64","description":"Статус ошибки"},"message":{"type":"string","description":"Сообщение об ошибке"}},"required":["status","message"]},{"type":"object","properties":{"status":{"example":500},"message":{"example":"Внутренняя ошибка сервера"}}}]}}}},"default":{"description":"Прочие сообщения об ошибках","content":{"application/xml":{"schema":{"type":"object","description":"Ошибка","xml":{"name":"Error"},"properties":{"status":{"type":"integer","format":"int64","description":"Статус ошибки"},"message":{"type":"string","description":"Сообщение об ошибке"}},"required":["status","message"]}}}}}}},"/routes/{id}":{"get":{"tags":["Routes"],"summary":"Получить маршрут по ID","description":"Возвращает объект Route по указанному ID.","operationId":"getRouteById","parameters":[{"name":"id","in":"path","description":"Идентификатор маршрута","required":true,"schema":{"type":"integer","format":"int64","minimum":0,"exclusiveMinimum":true,"example":1}}],"responses":{"200":{"description":"Успешный ответ с объектом Route","content":{"application/xml":{"schema":{"allOf":[{"type":"object","xml":{"name":"Route"},"properties":{"id":{"type":"integer","format":"int64","description":"Уникальный идентификатор (автоматически генерируется). Значение поля должно быть больше 0.","readOnly":true,"minimum":0,"exclusiveMinimum":true,"example":1},"creationDate":{"type":"string","format":"date-time","description":"Дата и время создания (автоматически генерируется).","readOnly":true,"example":"2025-01-01T00:00:00Z"}}},{"type":"object","description":"Описывает маршрут с начальной и конечной точками.","xml":{"name":"Route"},"properties":{"name":{"type":"string","description":"Название маршрута","minLength":1,"example":"Москва"},"coordinates":{"type":"object","description":"Координаты","xml":{"name":"Coordinates"},"properties":{"x":{"type":"number","format":"double","maximum":716,"description":"X координата. Максимальное значение поля: 716","example":100},"y":{"type":"integer","format":"int64","description":"Y координата. Поле не может быть null","example":100}},"required":["y"]},"from":{"type":"object","description":"Местоположение с координатами и его названием","xml":{"name":"Location"},"properties":{"x":{"type":"number","format":"double","description":"X координата. Не может быть null.","example":100},"y":{"type":"number","format":"double","description":"Y координата.","example":100},"name":{"type":"string","minLength":1,"description":"Название локации. Не может быть пустой, не может быть null.","example":"Москва"}},"required":["x","name"]},"to":{"type":"object","description":"Местоположение с координатами и его названием","xml":{"name":"Location"},"properties":{"x":{"type":"number","format":"double","description":"X координата. Не может быть null.","example":100},"y":{"type":"number","format":"double","description":"Y координата.","example":100},"name":{"type":"string","minLength":1,"description":"Название локации. Не может быть пустой, не может быть null.","example":"Москва"}},"required":["x","name"]},"distance":{"type":"integer","format":"int64","description":"Длина маршрута. Должна быть больше 1.","minimum":1,"exclusiveMinimum":true,"nullable":true,"example":100}},"required":["name","coordinates","from","to"]}]}}}},"404":{"description":"Маршрут с указанным ID не найден","content":{"application/xml":{"schema":{"allOf":[{"type":"object","description":"Ошибка","xml":{"name":"Error"},"properties":{"status":{"type":"integer","format":"int64","description":"Статус ошибки"},"message":{"type":"string","description":"Сообщение об ошибке"}},"required":["status","message"]},{"type":"object","properties":{"status":{"example":404},"message":{"example":"Маршрут с указанным ID не найден"}}}]}}}},"500":{"description":"Внутренняя ошибка сервера","content":{"application/xml":{"schema":{"allOf":[{"type":"object","description":"Ошибка","xml":{"name":"Error"},"properties":{"status":{"type":"integer","format":"int64","description":"Статус ошибки"},"message":{"type":"string","description":"Сообщение об ошибке"}},"required":["status","message"]},{"type":"object","properties":{"status":{"example":500},"message":{"example":"Внутренняя ошибка сервера"}}}]}}}},"default":{"description":"Прочие сообщения об ошибках","content":{"application/xml":{"schema":{"type":"object","description":"Ошибка","xml":{"name":"Error"},"properties":{"status":{"type":"integer","format":"int64","description":"Статус ошибки"},"message":{"type":"string","description":"Сообщение об ошибке"}},"required":["status","message"]}}}}}},"put":{"tags":["Routes"],"summary":"Обновить существующий маршрут","description":"Обновляет объект Route.","operationId":"updateRoute","requestBody":{"description":"Обновленные данные для маршрута.","required":true,"content":{"application/xml":{"schema":{"type":"object","description":"Описывает маршрут с начальной и конечной точками.","xml":{"name":"Route"},"properties":{"name":{"type":"string","description":"Название маршрута","minLength":1,"example":"Москва"},"coordinates":{"type":"object","description":"Координаты","xml":{"name":"Coordinates"},"properties":{"x":{"type":"number","format":"double","maximum":716,"description":"X координата. Максимальное значение поля: 716","example":100},"y":{"type":"integer","format":"int64","description":"Y координата. Поле не может быть null","example":100}},"required":["y"]},"from":{"type":"object","description":"Местоположение с координатами и его названием","xml":{"name":"Location"},"properties":{"x":{"type":"number","format":"double","description":"X координата. Не может быть null.","example":100},"y":{"type":"number","format":"double","description":"Y координата.","example":100},"name":{"type":"string","minLength":1,"description":"Название локации. Не может быть пустой, не может быть null.","example":"Москва"}},"required":["x","name"]},"to":{"type":"object","description":"Местоположение с координатами и его названием","xml":{"name":"Location"},"properties":{"x":{"type":"number","format":"double","description":"X координата. Не может быть null.","example":100},"y":{"type":"number","format":"double","description":"Y координата.","example":100},"name":{"type":"string","minLength":1,"description":"Название локации. Не может быть пустой, не может быть null.","example":"Москва"}},"required":["x","name"]},"distance":{"type":"integer","format":"int64","description":"Длина маршрута. Должна быть больше 1.","minimum":1,"exclusiveMinimum":true,"nullable":true,"example":100}},"required":["name","coordinates","from","to"]}}}},"parameters":[{"name":"id","in":"path","description":"Идентификатор маршрута","required":true,"schema":{"type":"integer","format":"int64","minimum":0,"exclusiveMinimum":true,"example":1}}],"responses":{"200":{"description":"Успешный ответ с объектом Route","content":{"application/xml":{"schema":{"allOf":[{"type":"object","xml":{"name":"Route"},"properties":{"id":{"type":"integer","format":"int64","description":"Уникальный идентификатор (автоматически генерируется). Значение поля должно быть больше 0.","readOnly":true,"minimum":0,"exclusiveMinimum":true,"example":1},"creationDate":{"type":"string","format":"date-time","description":"Дата и время создания (автоматически генерируется).","readOnly":true,"example":"2025-01-01T00:00:00Z"}}},{"type":"object","description":"Описывает маршрут с начальной и конечной точками.","xml":{"name":"Route"},"properties":{"name":{"type":"string","description":"Название маршрута","minLength":1,"example":"Москва"},"coordinates":{"type":"object","description":"Координаты","xml":{"name":"Coordinates"},"properties":{"x":{"type":"number","format":"double","maximum":716,"description":"X координата. Максимальное значение поля: 716","example":100},"y":{"type":"integer","format":"int64","description":"Y координата. Поле не может быть null","example":100}},"required":["y"]},"from":{"type":"object","description":"Местоположение с координатами и его названием","xml":{"name":"Location"},"properties":{"x":{"type":"number","format":"double","description":"X координата. Не может быть null.","example":100},"y":{"type":"number","format":"double","description":"Y координата.","example":100},"name":{"type":"string","minLength":1,"description":"Название локации. Не может быть пустой, не может быть null.","example":"Москва"}},"required":["x","name"]},"to":{"type":"object","description":"Местоположение с координатами и его названием","xml":{"name":"Location"},"properties":{"x":{"type":"number","format":"double","description":"X координата. Не может быть null.","example":100},"y":{"type":"number","format":"double","description":"Y координата.","example":100},"name":{"type":"string","minLength":1,"description":"Название локации. Не может быть пустой, не может быть null.","example":"Москва"}},"required":["x","name"]},"distance":{"type":"integer","format":"int64","description":"Длина маршрута. Должна быть больше 1.","minimum":1,"exclusiveMinimum":true,"nullable":true,"example":100}},"required":["name","coordinates","from","to"]}]}}}},"400":{"description":"Валидация не пройдена","content":{"application/xml":{"schema":{"allOf":[{"type":"object","description":"Ошибка","xml":{"name":"Error"},"properties":{"status":{"type":"integer","format":"int64","description":"Статус ошибки"},"message":{"type":"string","description":"Сообщение об ошибке"}},"required":["status","message"]},{"type":"object","properties":{"status":{"example":400},"message":{"example":"Некорректные данные"}}}]}}}},"404":{"description":"Маршрут с указанным ID не найден","content":{"application/xml":{"schema":{"allOf":[{"type":"object","description":"Ошибка","xml":{"name":"Error"},"properties":{"status":{"type":"integer","format":"int64","description":"Статус ошибки"},"message":{"type":"string","description":"Сообщение об ошибке"}},"required":["status","message"]},{"type":"object","properties":{"status":{"example":404},"message":{"example":"Маршрут с указанным ID не найден"}}}]}}}},"500":{"description":"Внутренняя ошибка сервера","content":{"application/xml":{"schema":{"allOf":[{"type":"object","description":"Ошибка","xml":{"name":"Error"},"properties":{"status":{"type":"integer","format":"int64","description":"Статус ошибки"},"message":{"type":"string","description":"Сообщение об ошибке"}},"required":["status","message"]},{"type":"object","properties":{"status":{"example":500},"message":{"example":"Внутренняя ошибка сервера"}}}]}}}},"default":{"description":"Прочие сообщения об ошибках","content":{"application/xml":{"schema":{"type":"object","description":"Ошибка","xml":{"name":"Error"},"properties":{"status":{"type":"integer","format":"int64","description":"Статус ошибки"},"message":{"type":"string","description":"Сообщение об ошибке"}},"required":["status","message"]}}}}}},"delete":{"tags":["Routes"],"summary":"Удалить маршрут","description":"Удаляет объект Route.","operationId":"deleteRoute","parameters":[{"name":"id","in":"path","description":"Идентификатор маршрута","required":true,"schema":{"type":"integer","format":"int64","minimum":0,"exclusiveMinimum":true,"example":1}}],"responses":{"204":{"description":"Маршрут успешно удален"},"404":{"description":"Маршрут не найден","content":{"application/xml":{"schema":{"allOf":[{"type":"object","description":"Ошибка","xml":{"name":"Error"},"properties":{"status":{"type":"integer","format":"int64","description":"Статус ошибки"},"message":{"type":"string","description":"Сообщение об ошибке"}},"required":["status","message"]},{"type":"object","properties":{"status":{"example":404},"message":{"example":"Маршрут с указанным ID не найден"}}}]}}}}}}},"/routes/max/from":{"get":{"tags":["Routes"],"summary":"Получить один маршрут с максимальным значением поля 'from'","description":"Возвращает один (любой) объект, значение поля `from` которого является максимальным.","operationId":"getMaxByFrom","responses":{"200":{"description":"Успешный ответ с объектом Route","content":{"application/xml":{"schema":{"allOf":[{"type":"object","xml":{"name":"Route"},"properties":{"id":{"type":"integer","format":"int64","description":"Уникальный идентификатор (автоматически генерируется). Значение поля должно быть больше 0.","readOnly":true,"minimum":0,"exclusiveMinimum":true,"example":1},"creationDate":{"type":"string","format":"date-time","description":"Дата и время создания (автоматически генерируется).","readOnly":true,"example":"2025-01-01T00:00:00Z"}}},{"type":"object","description":"Описывает маршрут с начальной и конечной точками.","xml":{"name":"Route"},"properties":{"name":{"type":"string","description":"Название маршрута","minLength":1,"example":"Москва"},"coordinates":{"type":"object","description":"Координаты","xml":{"name":"Coordinates"},"properties":{"x":{"type":"number","format":"double","maximum":716,"description":"X координата. Максимальное значение поля: 716","example":100},"y":{"type":"integer","format":"int64","description":"Y координата. Поле не может быть null","example":100}},"required":["y"]},"from":{"type":"object","description":"Местоположение с координатами и его названием","xml":{"name":"Location"},"properties":{"x":{"type":"number","format":"double","description":"X координата. Не может быть null.","example":100},"y":{"type":"number","format":"double","description":"Y координата.","example":100},"name":{"type":"string","minLength":1,"description":"Название локации. Не может быть пустой, не может быть null.","example":"Москва"}},"required":["x","name"]},"to":{"type":"object","description":"Местоположение с координатами и его названием","xml":{"name":"Location"},"properties":{"x":{"type":"number","format":"double","description":"X координата. Не может быть null.","example":100},"y":{"type":"number","format":"double","description":"Y координата.","example":100},"name":{"type":"string","minLength":1,"description":"Название локации. Не может быть пустой, не может быть null.","example":"Москва"}},"required":["x","name"]},"distance":{"type":"integer","format":"int64","description":"Длина маршрута. Должна быть больше 1.","minimum":1,"exclusiveMinimum":true,"nullable":true,"example":100}},"required":["name","coordinates","from","to"]}]}}}},"404":{"description":"В коллекции нет ни одного маршрута","content":{"application/xml":{"schema":{"allOf":[{"type":"object","description":"Ошибка","xml":{"name":"Error"},"properties":{"status":{"type":"integer","format":"int64","description":"Статус ошибки"},"message":{"type":"string","description":"Сообщение об ошибке"}},"required":["status","message"]},{"type":"object","properties":{"status":{"example":404},"message":{"example":"Маршрут с указанным ID не найден"}}}]}}}},"500":{"description":"Внутренняя ошибка сервера","content":{"application/xml":{"schema":{"allOf":[{"type":"object","description":"Ошибка","xml":{"name":"Error"},"properties":{"status":{"type":"integer","format":"int64","description":"Статус ошибки"},"message":{"type":"string","description":"Сообщение об ошибке"}},"required":["status","message"]},{"type":"object","properties":{"status":{"example":500},"message":{"example":"Внутренняя ошибка сервера"}}}]}}}}}}},"/routes/name/starts-with/{substring}":{"get":{"tags":["Routes"],"summary":"Найти маршруты, имя которых начинается с подстроки","operationId":"getRoutesByNamePrefix","parameters":[{"name":"substring","in":"path","description":"Подстрока для поиска в начале поля `name`","required":true,"schema":{"type":"string","minLength":1,"example":"Моск"}}],"responses":{"200":{"description":"Массив найденных маршрутов","content":{"application/xml":{"schema":{"type":"array","xml":{"name":"RouteList"},"items":{"allOf":[{"type":"object","xml":{"name":"Route"},"properties":{"id":{"type":"integer","format":"int64","description":"Уникальный идентификатор (автоматически генерируется). Значение поля должно быть больше 0.","readOnly":true,"minimum":0,"exclusiveMinimum":true,"example":1},"creationDate":{"type":"string","format":"date-time","description":"Дата и время создания (автоматически генерируется).","readOnly":true,"example":"2025-01-01T00:00:00Z"}}},{"type":"object","description":"Описывает маршрут с начальной и конечной точками.","xml":{"name":"Route"},"properties":{"name":{"type":"string","description":"Название маршрута","minLength":1,"example":"Москва"},"coordinates":{"type":"object","description":"Координаты","xml":{"name":"Coordinates"},"properties":{"x":{"type":"number","format":"double","maximum":716,"description":"X координата. Максимальное значение поля: 716","example":100},"y":{"type":"integer","format":"int64","description":"Y координата. Поле не может быть null","example":100}},"required":["y"]},"from":{"type":"object","description":"Местоположение с координатами и его названием","xml":{"name":"Location"},"properties":{"x":{"type":"number","format":"double","description":"X координата. Не может быть null.","example":100},"y":{"type":"number","format":"double","description":"Y координата.","example":100},"name":{"type":"string","minLength":1,"description":"Название локации. Не может быть пустой, не может быть null.","example":"Москва"}},"required":["x","name"]},"to":{"type":"object","description":"Местоположение с координатами и его названием","xml":{"name":"Location"},"properties":{"x":{"type":"number","format":"double","description":"X координата. Не может быть null.","example":100},"y":{"type":"number","format":"double","description":"Y координата.","example":100},"name":{"type":"string","minLength":1,"description":"Название локации. Не может быть пустой, не может быть null.","example":"Москва"}},"required":["x","name"]},"distance":{"type":"integer","format":"int64","description":"Длина маршрута. Должна быть больше 1.","minimum":1,"exclusiveMinimum":true,"nullable":true,"example":100}},"required":["name","coordinates","from","to"]}]}}}}},"400":{"description":"Некорректные данные","content":{"application/xml":{"schema":{"allOf":[{"type":"object","description":"Ошибка","xml":{"name":"Error"},"properties":{"status":{"type":"integer","format":"int64","description":"Статус ошибки"},"message":{"type":"string","description":"Сообщение об ошибке"}},"required":["status","message"]},{"type":"object","properties":{"status":{"example":400},"message":{"example":"Некорректные данные"}}}]}}}},"500":{"description":"Внутренняя ошибка сервера","content":{"application/xml":{"schema":{"allOf":[{"type":"object","description":"Ошибка","xml":{"name":"Error"},"properties":{"status":{"type":"integer","format":"int64","description":"Статус ошибки"},"message":{"type":"string","description":"Сообщение об ошибке"}},"required":["status","message"]},{"type":"object","properties":{"status":{"example":500},"message":{"example":"Внутренняя ошибка сервера"}}}]}}}}}}},"/routes/distances/unique":{"get":{"tags":["Routes"],"summary":"Получить массив уникальных значений поля distance","operationId":"getUniqueDistances","responses":{"200":{"description":"Массив уникальных дистанций","content":{"application/xml":{"schema":{"type":"array","xml":{"name":"DistanceList"},"uniqueItems":true,"items":{"type":"integer","format":"int64","description":"Уникальное значение дистанции"},"example":[100,250,500,1000]}}}},"500":{"description":"Внутренняя ошибка сервера","content":{"application/xml":{"schema":{"allOf":[{"type":"object","description":"Ошибка","xml":{"name":"Error"},"properties":{"status":{"type":"integer","format":"int64","description":"Статус ошибки"},"message":{"type":"string","description":"Сообщение об ошибке"}},"required":["status","message"]},{"type":"object","properties":{"status":{"example":500},"message":{"example":"Внутренняя ошибка сервера"}}}]}}}}}}}},"components":{"schemas":{"Coordinates":{"type":"object","description":"Координаты","xml":{"name":"Coordinates"},"properties":{"x":{"type":"number","format":"double","maximum":716,"description":"X координата. Максимальное значение поля: 716","example":100},"y":{"type":"integer","format":"int64","description":"Y координата. Поле не может быть null","example":100}},"required":["y"]},"Location":{"type":"object","description":"Местоположение с координатами и его названием","xml":{"name":"Location"},"properties":{"x":{"type":"number","format":"double","description":"X координата. Не может быть null.","example":100},"y":{"type":"number","format":"double","description":"Y координата.","example":100},"name":{"type":"string","minLength":1,"description":"Название локации. Не может быть пустой, не может быть null.","example":"Москва"}},"required":["x","name"]},"RouteInput":{"type":"object","description":"Описывает маршрут с начальной и конечной точками.","xml":{"name":"Route"},"properties":{"name":{"type":"string","description":"Название маршрута","minLength":1,"example":"Москва"},"coordinates":{"type":"object","description":"Координаты","xml":{"name":"Coordinates"},"properties":{"x":{"type":"number","format":"double","maximum":716,"description":"X координата. Максимальное значение поля: 716","example":100},"y":{"type":"integer","format":"int64","description":"Y координата. Поле не может быть null","example":100}},"required":["y"]},"from":{"type":"object","description":"Местоположение с координатами и его названием","xml":{"name":"Location"},"properties":{"x":{"type":"number","format":"double","description":"X координата. Не может быть null.","example":100},"y":{"type":"number","format":"double","description":"Y координата.","example":100},"name":{"type":"string","minLength":1,"description":"Название локации. Не может быть пустой, не может быть null.","example":"Москва"}},"required":["x","name"]},"to":{"type":"object","description":"Местоположение с координатами и его названием","xml":{"name":"Location"},"properties":{"x":{"type":"number","format":"double","description":"X координата. Не может быть null.","example":100},"y":{"type":"number","format":"double","description":"Y координата.","example":100},"name":{"type":"string","minLength":1,"description":"Название локации. Не может быть пустой, не может быть null.","example":"Москва"}},"required":["x","name"]},"distance":{"type":"integer","format":"int64","description":"Длина маршрута. Должна быть больше 1.","minimum":1,"exclusiveMinimum":true,"nullable":true,"example":100}},"required":["name","coordinates","from","to"]},"Route":{"allOf":[{"type":"object","xml":{"name":"Route"},"properties":{"id":{"type":"integer","format":"int64","description":"Уникальный идентификатор (автоматически генерируется). Значение поля должно быть больше 0.","readOnly":true,"minimum":0,"exclusiveMinimum":true,"example":1},"creationDate":{"type":"string","format":"date-time","description":"Дата и время создания (автоматически генерируется).","readOnly":true,"example":"2025-01-01T00:00:00Z"}}},{"type":"object","description":"Описывает маршрут с начальной и конечной точками.","xml":{"name":"Route"},"properties":{"name":{"type":"string","description":"Название маршрута","minLength":1,"example":"Москва"},"coordinates":{"type":"object","description":"Координаты","xml":{"name":"Coordinates"},"properties":{"x":{"type":"number","format":"double","maximum":716,"description":"X координата. Максимальное значение поля: 716","example":100},"y":{"type":"integer","format":"int64","description":"Y координата. Поле не может быть null","example":100}},"required":["y"]},"from":{"type":"object","description":"Местоположение с координатами и его названием","xml":{"name":"Location"},"properties":{"x":{"type":"number","format":"double","description":"X координата. Не может быть null.","example":100},"y":{"type":"number","format":"double","description":"Y координата.","example":100},"name":{"type":"string","minLength":1,"description":"Название локации. Не может быть пустой, не может быть null.","example":"Москва"}},"required":["x","name"]},"to":{"type":"object","description":"Местоположение с координатами и его названием","xml":{"name":"Location"},"properties":{"x":{"type":"number","format":"double","description":"X координата. Не может быть null.","example":100},"y":{"type":"number","format":"double","description":"Y координата.","example":100},"name":{"type":"string","minLength":1,"description":"Название локации. Не может быть пустой, не может быть null.","example":"Москва"}},"required":["x","name"]},"distance":{"type":"integer","format":"int64","description":"Длина маршрута. Должна быть больше 1.","minimum":1,"exclusiveMinimum":true,"nullable":true,"example":100}},"required":["name","coordinates","from","to"]}]},"Error":{"type":"object","description":"Ошибка","xml":{"name":"Error"},"properties":{"status":{"type":"integer","format":"int64","description":"Статус ошибки"},"message":{"type":"string","description":"Сообщение об ошибке"}},"required":["status","message"]},"InternalServerError":{"allOf":[{"type":"object","description":"Ошибка","xml":{"name":"Error"},"properties":{"status":{"type":"integer","format":"int64","description":"Статус ошибки"},"message":{"type":"string","description":"Сообщение об ошибке"}},"required":["status","message"]},{"type":"object","properties":{"status":{"example":500},"message":{"example":"Внутренняя ошибка сервера"}}}]},"NotFoundError":{"allOf":[{"type":"object","description":"Ошибка","xml":{"name":"Error"},"properties":{"status":{"type":"integer","format":"int64","description":"Статус ошибки"},"message":{"type":"string","description":"Сообщение об ошибке"}},"required":["status","message"]},{"type":"object","properties":{"status":{"example":404},"message":{"example":"Маршрут с указанным ID не найден"}}}]},"BadRequestError":{"allOf":[{"type":"object","description":"Ошибка","xml":{"name":"Error"},"properties":{"status":{"type":"integer","format":"int64","description":"Статус ошибки"},"message":{"type":"string","description":"Сообщение об ошибке"}},"required":["status","message"]},{"type":"object","properties":{"status":{"example":400},"message":{"example":"Некорректные данные"}}}]}}}}</script>
</head>
<body>
  <button id="search-button">
    <span class="icon material-symbols-outlined">search</span>
    <span class="text"></span>
  </button>
  <dialog id="search-dialog">
    <input id="auto-complete" autocomplete="off">
  </dialog>
  <div id="swagger-ui"></div>
  <script src="https://unpkg.com/swagger-ui-dist@5.26.2/swagger-ui-bundle.js" crossorigin></script>
  <script>// eslint-disable-next-line no-unused-vars
class SearchDialog {
  dialog
  autocomplete

  constructor(dialogId, inputId, openapi) {
    this.dialog = document.getElementById(dialogId)
    if (!this.dialog) {
      throw new Error(`Dialog with id "${dialogId}" not found`)
    }

    this.autocomplete = new autoComplete({
      selector: `#${inputId}`,
      placeHolder: 'Search endpoints',
      data: {
        src: this.filterEndpoints(openapi),
        keys: ['searchKey'],
      },
      searchEngine: 'loose',
      threshold: 0,
      resultsList: {
        maxResults: undefined,
        class: 'auto-complete-list',
        element: (list, data) => {
          if (data.results.length > 0) {
            list.innerHTML = ''
            data.results.forEach((item) => {
              const li = document.createElement('li')
              li.className = 'auto-complete-list-item'
              li.innerHTML = `
              <div class="method-tag method-${item.value.method.toLowerCase()}">${item.value.method}</div>
              <div class="endpoint-info">
                <div class="endpoint-path">${item.value.path}</div>
                <div class="endpoint-summary">${item.value.summary}</div>
              </div>
            `
              list.appendChild(li)
            })
          }
        },
      },
    })

    this.dialog.addEventListener('click', (event) => {
      if (event.target === this.dialog) {
        this.hide()
      }
    })
  }

  on(event, callback) {
    if (event === 'select') {
      this.autocomplete.input.addEventListener('selection', (event) => {
        callback(event.detail.selection.value)
      })
    } else {
      throw new Error(`Unsupported event: ${event}`)
    }
  }

  show() {
    this.autocomplete.input.value = ''
    this.autocomplete.start()
    this.dialog.showModal()
  }

  hide() {
    this.dialog.close()
  }

  filterEndpoints(openapi) {
    const endpoints = []
    const paths = openapi.paths
    for (const path in paths) {
      const methods = Object.keys(paths[path])
      for (const method of methods) {
        if (method === 'parameters') {
          continue
        }
        const summary = paths[path][method].summary || ''
        endpoints.push({
          searchKey: `${method} ${path} ${summary}`,
          method: method.toUpperCase(),
          path,
          operationId: paths[path][method].operationId,
          tag: paths[path][method].tags
            ? paths[path][method].tags[0]
            : 'default',
          summary,
        })
      }
    }
    return endpoints
  }
}
</script>
  <script>const THEMES = ['light', 'dark']
const themeParam = new URLSearchParams(window.location.search).get('theme')
if (THEMES.includes(themeParam)) {
  document.documentElement.setAttribute('data-theme', themeParam)
}

// ref. https://developer.mozilla.org/en-US/docs/Web/API/Navigator/platform#examples
const modifierKeyPrefix =
  navigator.platform.startsWith('Mac') || navigator.platform === 'iPhone'
    ? '⌘' // command key
    : '^' // control key

/* ref. https://swagger.io/docs/open-source-tools/swagger-ui/usage/installation/ */
window.onload = () => {
  window.ui = SwaggerUIBundle({
    spec: window.apiDocs,
    dom_id: '#swagger-ui',
    deepLinking: true,
  })

  const searchButton = document.querySelector('#search-button')
  searchButton.addEventListener('click', () => searchDialog.show())
  searchButton.querySelector('.text').textContent =
    `Search ${modifierKeyPrefix}+K`

  // eslint-disable-next-line no-undef
  const searchDialog = new SearchDialog(
    'search-dialog',
    'auto-complete',
    window.apiDocs,
  )
  searchDialog.on('select', (selection) => {
    const tag = selection.tag
    const operationId = selection.operationId
    const url = new URL(location.href)
    url.hash = `#/${tag}/${operationId}`
    location.href = url.toString()
    searchDialog.hide()

    const opblock = document.querySelector(`#operations-${tag}-${operationId}`)
    opblock.scrollIntoView({
      behavior: 'smooth',
      block: 'start',
    })
    const opblockButton = opblock.querySelector(
      '.opblock-summary-control[aria-expanded="false"]',
    )
    if (opblockButton) {
      opblockButton.click()
    }
  })

  document.addEventListener('keydown', function (e) {
    const isCmdOrCtrl = modifierKeyPrefix === '⌘' ? e.metaKey : e.ctrlKey
    if (isCmdOrCtrl && e.key.toLowerCase() === 'k') {
      searchDialog.show()
      e.preventDefault()
    }
  })
}
</script>
</body>
</html>